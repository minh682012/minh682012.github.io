<!DOCTYPE html>  
<html lang="vi">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>hành trình</title>  
    <style>  
        body {  
            font-family: Arial, sans-serif;  
            margin: 20px;  
        }  
        input, button {  
            margin: 5px;  
            padding: 10px;  
        }  
    </style>  
</head>  
<body>  
    <h1>Đếm Thời Gian</h1>  
    
    <div>  
        <label for="startHour">Giờ:</label>  
        <input type="number" id="startHour" min="0" max="23" placeholder="Giờ (0-23)" onchange="saveTime()">  
        <label for="startMinute">Phút:</label>  
        <input type="number" id="startMinute" min="0" max="59" placeholder="Phút (0-59)" onchange="saveTime()">  
        <label for="startDay">Ngày:</label>  
        <input type="number" id="startDay" min="1" placeholder="Ngày (1-31)" onchange="saveTime()">  
        <label for="startMonth">Tháng:</label>  
        <input type="number" id="startMonth" min="1" max="12" placeholder="Tháng (1-12)" onchange="saveTime()">  
        <label for="startYear">Năm:</label>  
        <input type="number" id="startYear" min="1970" placeholder="Năm (1970+)" onchange="saveTime()">  
        <button id="changeButton" onclick="enableEdit()">Đổi</button>  
    </div>  
    
    <div id="daysCount"></div>  
    <div id="detailedCount"></div>  
    <div id="hmsCount"></div>  
    
    <script>  
        function saveTime() {  
            const hour = document.getElementById('startHour').value;  
            const minute = document.getElementById('startMinute').value;  
            const day = document.getElementById('startDay').value;  
            const month = document.getElementById('startMonth').value;  
            const year = document.getElementById('startYear').value;  

            localStorage.setItem('startHour', hour);  
            localStorage.setItem('startMinute', minute);  
            localStorage.setItem('startDay', day);  
            localStorage.setItem('startMonth', month);  
            localStorage.setItem('startYear', year);  
        }  

        function enableEdit() {  
            document.getElementById('startHour').disabled = false;  
            document.getElementById('startMinute').disabled = false;  
            document.getElementById('startDay').disabled = false;  
            document.getElementById('startMonth').disabled = false;  
            document.getElementById('startYear').disabled = false;  
        }  

        function loadTime() {  
            const hour = localStorage.getItem('startHour');  
            const minute = localStorage.getItem('startMinute');  
            const day = localStorage.getItem('startDay');  
            const month = localStorage.getItem('startMonth');  
            const year = localStorage.getItem('startYear');  

            if (hour !== null) document.getElementById('startHour').value = hour;  
            if (minute !== null) document.getElementById('startMinute').value = minute;  
            if (day !== null) document.getElementById('startDay').value = day;  
            if (month !== null) document.getElementById('startMonth').value = month;  
            if (year !== null) document.getElementById('startYear').value = year;  
        }  

        function startTimer() {  
            const storedStartDate = localStorage.getItem('startDate');  
            if (storedStartDate) {  
                setInterval(updateDisplay, 1000); // Cập nhật mỗi giây  
                updateDisplay(); // Cập nhật ngay khi bắt đầu  
            }  
        }  
        
        function updateDisplay() {  
            const storedStartDate = localStorage.getItem('startDate');  

            if (storedStartDate) {  
                const startDate = Number(storedStartDate);  
                const currentDate = new Date().getTime();  
                const timeDiff = currentDate - startDate; // tính bằng milliseconds  
                
                const diffDays = Math.floor(timeDiff / (1000 * 60 * 60 * 24));  
                const diffMonths = Math.floor(diffDays / 30);  
                const diffYears = Math.floor(diffMonths / 12);  
                const remainingDays = diffDays % 30;  
                const remainingWeeks = Math.floor(remainingDays / 7);  
                const finalDays = remainingDays % 7;  

                const hoursLeft = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));  
                const minutesLeft = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));  
                const secondsLeft = Math.floor((timeDiff % (1000 * 60)) / 1000);  

                document.getElementById('daysCount').innerHTML = `Số ngày đã trôi qua: ${diffDays} ngày`;  
                document.getElementById('detailedCount').innerHTML = `Số năm: ${diffYears}, Số tháng: ${diffMonths % 12}, Số tuần: ${remainingWeeks}, Số ngày: ${finalDays}`;  
                document.getElementById('hmsCount').innerHTML = `Thời gian đã trôi qua: ${hoursLeft} giờ ${minutesLeft} phút ${secondsLeft} giây`;  
            }  
        }  

        // Bắt đầu khi tải trang  
        document.addEventListener('DOMContentLoaded', (event) => {  
            loadTime(); // Tải thời gian từ localStorage  
            const storedStartDate = localStorage.getItem('startDate');  
            if (storedStartDate) {  
                startTimer();  
            }  
        });  
    </script>  
</body>  
</html>